<div class="carousel">
    <div class="carousel-images" id="carouselContainer">
        <!-- Las imágenes del carrusel se generarán aquí -->
    </div>
    <div class="carousel-buttons">
        <button class="carousel-button" id="prev">&lt;</button>
        <button class="carousel-button" id="next">&gt;</button>
    </div>
</div>

<script>
    async function cargarContenido() {
        const url = "https://raw.githubusercontent.com/pelisplanet2019/PlexMania/refs/heads/main/Menu%20princial/menu%20principal.xml";

        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

            const xmlText = await response.text();
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlText, "application/xml");

            // Cargar carrusel
            const carruselItems = xmlDoc.querySelectorAll("carrusel > item");
            const carouselContainer = document.getElementById("carouselContainer");
            if (carruselItems.length === 0) {
                console.warn("No se encontraron elementos para el carrusel.");
            }
            carruselItems.forEach(item => {
                const imagen = item.querySelector("imagen").textContent;
                const enlace = item.querySelector("enlace").textContent;
                const aElement = document.createElement("a");
                aElement.href = enlace;
                aElement.target = "_blank";
                aElement.innerHTML = `<img src="${imagen}" alt="Carrusel">`;
                carouselContainer.appendChild(aElement);
            });

            // Iniciar funcionalidad del carrusel
            iniciarCarrusel();

        } catch (error) {
            console.error("Error al cargar el contenido:", error);
        }
    }

    function iniciarCarrusel() {
        const carouselImages = document.querySelector('.carousel-images');
        const images = carouselImages.querySelectorAll('img');
        const prevButton = document.getElementById('prev');
        const nextButton = document.getElementById('next');

        let index = 0;

        function updateCarousel() {
            const width = images[0]?.clientWidth || 0;
            carouselImages.style.transform = `translateX(${-index * width}px)`;
        }

        prevButton.addEventListener('click', () => {
            index = (index > 0) ? index - 1 : images.length - 1;
            updateCarousel();
        });

        nextButton.addEventListener('click', () => {
            index = (index < images.length - 1) ? index + 1 : 0;
            updateCarousel();
        });

        // Actualizar automáticamente
        setInterval(() => {
            nextButton.click();
        }, 5000);
    }

    document.addEventListener("DOMContentLoaded", cargarContenido);
</script>
